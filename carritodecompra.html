<!-- Página del carrito de compras -->
<!DOCTYPE html>
<html>
<head>
   <link rel="icon" type="image/vnd.microsoft.icon" href="carrito_compra.png" />
	
</head>
<body>

  <h1>Carrito de Compras</h1>
  <ul id="carritoLista"></ul>
	 <button id="delItems"
    style="margin-left:30px; margin-top: 20px; margin-bottom: 40px; width:150px; height:40px; border-radius: 15px;">Vaciar
    Carrito</button>
  

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Obtén el carrito desde localStorage
      const carrito = JSON.parse(localStorage.getItem("carrito"));

      // Obtén el elemento de la lista del carrito
      const carritoLista = document.getElementById("carritoLista");

      if (carrito && carrito.length > 0) {
        // Recorre los productos en el carrito y muestra cada uno en la lista
        carrito.forEach((product) => {
          const listItem = document.createElement("li");
          listItem.textContent = product.title;
          carritoLista.appendChild(listItem);

	// Crear elementos para la imagen y el nombre del producto
            const productImage = document.createElement("img");
            productImage.src = product.image;
            productImage.alt = product.title;
            productImage.style.width = "100px";  // Ajusta el tamaño según sea necesario

            const productName = document.createElement("span");
            productName.textContent = product.title;

            const productPrice = document.createElement("span");
            productPrice.textContent = product.price;

            // Crear botones de incremento y decremento
            const incrementButton = document.createElement("button");
            incrementButton.textContent = "+";
            incrementButton.addEventListener("click", () => incrementarCantidad(product));

            const decrementButton = document.createElement("button");
            decrementButton.textContent = "-";
            decrementButton.addEventListener("click", () => decrementarCantidad(product));

            const quantityElement = document.createElement("span");
            // Verificar si la cantidad está definida, si no, establecerla en 1
            quantityElement.textContent = `Cantidad: ${product.quantity || 1}`;

            // Agregar elementos al listItem
            listItem.appendChild(productImage);
            listItem.appendChild(productName);
            listItem.appendChild(productPrice);
            
            listItem.appendChild(decrementButton);
            listItem.appendChild(quantityElement);
            listItem.appendChild(incrementButton);

            // Agregar listItem a la lista del carrito
            carritoLista.appendChild(listItem);
          });
        } else {
          carritoLista.innerHTML = "<p>El carrito está vacío.</p>";
        }
      }

      // Función para incrementar la cantidad del producto
      function incrementarCantidad(product) {
        // Verificar si la propiedad 'quantity' existe y es un número
        if (typeof product.quantity === 'number') {
          product.quantity += 1;
        } else {
          // Si no existe o no es un número, establecerla en 1
          product.quantity = 1;
        }

        // Llamar a la función para actualizar el carrito
        actualizarCarrito();
      }

      // Función para decrementar la cantidad del producto
      function decrementarCantidad(product) {
        if (product.quantity > 1) {
          product.quantity -= 1;
        } else {
          // Si la cantidad es 1 o menos, eliminar el producto del carrito
          carrito.splice(carrito.indexOf(product), 1);
        }
        actualizarCarrito();
      }

    //función que elimina todos los elementos del carrito al accionar el botón
    function deleteItems() {
      localStorage.removeItem("carrito");
      const carritoLista = document.getElementById("carritoLista");
      carritoLista.innerHTML = "<P> !SIGUE COMPRANDO PARA VER TUS PRODUCTOS ! </P>";
    }

  
  </script>
	<style>
		 body{
   
      background-color: #f7cbf7;
  }
	</style>
</body>
</html>
